// generated by cdk8s
import { ApiObject, ApiObjectMetadata, GroupVersionKind } from 'cdk8s';
import { Construct } from 'constructs';


/**
 * Metric represents a resource to configure the metric collector with.
 *
 * @schema Metric
 */
export class Metric extends ApiObject {
  /**
   * Returns the apiVersion and kind for "Metric"
   */
  public static readonly GVK: GroupVersionKind = {
    apiVersion: 'autoscaling.internal.knative.dev/v1alpha1',
    kind: 'Metric',
  }

  /**
   * Renders a Kubernetes manifest for "Metric".
   *
   * This can be used to inline resource manifests inside other objects (e.g. as templates).
   *
   * @param props initialization props
   */
  public static manifest(props: MetricProps = {}): any {
    return {
      ...Metric.GVK,
      ...toJson_MetricProps(props),
    };
  }

  /**
   * Defines a "Metric" API object
   * @param scope the scope in which to define this object
   * @param id a scope-local name for the object
   * @param props initialization props
   */
  public constructor(scope: Construct, id: string, props: MetricProps = {}) {
    super(scope, id, {
      ...Metric.GVK,
      ...props,
    });
  }

  /**
   * Renders the object to Kubernetes JSON.
   */
  public override toJson(): any {
    const resolved = super.toJson();

    return {
      ...Metric.GVK,
      ...toJson_MetricProps(resolved),
    };
  }
}

/**
 * Metric represents a resource to configure the metric collector with.
 *
 * @schema Metric
 */
export interface MetricProps {
  /**
   * @schema Metric#metadata
   */
  readonly metadata?: ApiObjectMetadata;

  /**
   * Spec holds the desired state of the Metric (from the client).
   *
   * @schema Metric#spec
   */
  readonly spec?: MetricSpec;

}

/**
 * Converts an object of type 'MetricProps' to JSON representation.
 */
/* eslint-disable max-len, @stylistic/max-len, quote-props, @stylistic/quote-props */
export function toJson_MetricProps(obj: MetricProps | undefined): Record<string, any> | undefined {
  if (obj === undefined) { return undefined; }
  const result = {
    'metadata': obj.metadata,
    'spec': toJson_MetricSpec(obj.spec),
  };
  // filter undefined values
  return Object.entries(result).reduce((r, i) => (i[1] === undefined) ? r : ({ ...r, [i[0]]: i[1] }), {});
}
/* eslint-enable max-len, @stylistic/max-len, quote-props, @stylistic/quote-props */

/**
 * Spec holds the desired state of the Metric (from the client).
 *
 * @schema MetricSpec
 */
export interface MetricSpec {
  /**
   * PanicWindow is the aggregation window for metrics where quick reactions are needed.
   *
   * @schema MetricSpec#panicWindow
   */
  readonly panicWindow: number;

  /**
   * ScrapeTarget is the K8s service that publishes the metric endpoint.
   *
   * @schema MetricSpec#scrapeTarget
   */
  readonly scrapeTarget: string;

  /**
   * StableWindow is the aggregation window for metrics in a stable state.
   *
   * @schema MetricSpec#stableWindow
   */
  readonly stableWindow: number;

}

/**
 * Converts an object of type 'MetricSpec' to JSON representation.
 */
/* eslint-disable max-len, @stylistic/max-len, quote-props, @stylistic/quote-props */
export function toJson_MetricSpec(obj: MetricSpec | undefined): Record<string, any> | undefined {
  if (obj === undefined) { return undefined; }
  const result = {
    'panicWindow': obj.panicWindow,
    'scrapeTarget': obj.scrapeTarget,
    'stableWindow': obj.stableWindow,
  };
  // filter undefined values
  return Object.entries(result).reduce((r, i) => (i[1] === undefined) ? r : ({ ...r, [i[0]]: i[1] }), {});
}
/* eslint-enable max-len, @stylistic/max-len, quote-props, @stylistic/quote-props */


/**
 * PodAutoscaler is a Knative abstraction that encapsulates the interface by which Knative
components instantiate autoscalers.  This definition is an abstraction that may be backed
by multiple definitions.  For more information, see the Knative Pluggability presentation:
https://docs.google.com/presentation/d/19vW9HFZ6Puxt31biNZF3uLRejDmu82rxJIk1cWmxF7w/edit
 *
 * @schema PodAutoscaler
 */
export class PodAutoscaler extends ApiObject {
  /**
   * Returns the apiVersion and kind for "PodAutoscaler"
   */
  public static readonly GVK: GroupVersionKind = {
    apiVersion: 'autoscaling.internal.knative.dev/v1alpha1',
    kind: 'PodAutoscaler',
  }

  /**
   * Renders a Kubernetes manifest for "PodAutoscaler".
   *
   * This can be used to inline resource manifests inside other objects (e.g. as templates).
   *
   * @param props initialization props
   */
  public static manifest(props: PodAutoscalerProps = {}): any {
    return {
      ...PodAutoscaler.GVK,
      ...toJson_PodAutoscalerProps(props),
    };
  }

  /**
   * Defines a "PodAutoscaler" API object
   * @param scope the scope in which to define this object
   * @param id a scope-local name for the object
   * @param props initialization props
   */
  public constructor(scope: Construct, id: string, props: PodAutoscalerProps = {}) {
    super(scope, id, {
      ...PodAutoscaler.GVK,
      ...props,
    });
  }

  /**
   * Renders the object to Kubernetes JSON.
   */
  public override toJson(): any {
    const resolved = super.toJson();

    return {
      ...PodAutoscaler.GVK,
      ...toJson_PodAutoscalerProps(resolved),
    };
  }
}

/**
 * PodAutoscaler is a Knative abstraction that encapsulates the interface by which Knative
 * components instantiate autoscalers.  This definition is an abstraction that may be backed
 * by multiple definitions.  For more information, see the Knative Pluggability presentation:
 * https://docs.google.com/presentation/d/19vW9HFZ6Puxt31biNZF3uLRejDmu82rxJIk1cWmxF7w/edit
 *
 * @schema PodAutoscaler
 */
export interface PodAutoscalerProps {
  /**
   * @schema PodAutoscaler#metadata
   */
  readonly metadata?: ApiObjectMetadata;

  /**
   * Spec holds the desired state of the PodAutoscaler (from the client).
   *
   * @schema PodAutoscaler#spec
   */
  readonly spec?: PodAutoscalerSpec;

}

/**
 * Converts an object of type 'PodAutoscalerProps' to JSON representation.
 */
/* eslint-disable max-len, @stylistic/max-len, quote-props, @stylistic/quote-props */
export function toJson_PodAutoscalerProps(obj: PodAutoscalerProps | undefined): Record<string, any> | undefined {
  if (obj === undefined) { return undefined; }
  const result = {
    'metadata': obj.metadata,
    'spec': toJson_PodAutoscalerSpec(obj.spec),
  };
  // filter undefined values
  return Object.entries(result).reduce((r, i) => (i[1] === undefined) ? r : ({ ...r, [i[0]]: i[1] }), {});
}
/* eslint-enable max-len, @stylistic/max-len, quote-props, @stylistic/quote-props */

/**
 * Spec holds the desired state of the PodAutoscaler (from the client).
 *
 * @schema PodAutoscalerSpec
 */
export interface PodAutoscalerSpec {
  /**
   * ContainerConcurrency specifies the maximum allowed
   * in-flight (concurrent) requests per container of the Revision.
   * Defaults to `0` which means unlimited concurrency.
   *
   * @default 0` which means unlimited concurrency.
   * @schema PodAutoscalerSpec#containerConcurrency
   */
  readonly containerConcurrency?: number;

  /**
   * The application-layer protocol. Matches `ProtocolType` inferred from the revision spec.
   *
   * @schema PodAutoscalerSpec#protocolType
   */
  readonly protocolType: string;

  /**
   * Reachability specifies whether or not the `ScaleTargetRef` can be reached (ie. has a route).
   * Defaults to `ReachabilityUnknown`
   *
   * @default ReachabilityUnknown`
   * @schema PodAutoscalerSpec#reachability
   */
  readonly reachability?: string;

  /**
   * ScaleTargetRef defines the /scale-able resource that this PodAutoscaler
   * is responsible for quickly right-sizing.
   *
   * @schema PodAutoscalerSpec#scaleTargetRef
   */
  readonly scaleTargetRef: PodAutoscalerSpecScaleTargetRef;

}

/**
 * Converts an object of type 'PodAutoscalerSpec' to JSON representation.
 */
/* eslint-disable max-len, @stylistic/max-len, quote-props, @stylistic/quote-props */
export function toJson_PodAutoscalerSpec(obj: PodAutoscalerSpec | undefined): Record<string, any> | undefined {
  if (obj === undefined) { return undefined; }
  const result = {
    'containerConcurrency': obj.containerConcurrency,
    'protocolType': obj.protocolType,
    'reachability': obj.reachability,
    'scaleTargetRef': toJson_PodAutoscalerSpecScaleTargetRef(obj.scaleTargetRef),
  };
  // filter undefined values
  return Object.entries(result).reduce((r, i) => (i[1] === undefined) ? r : ({ ...r, [i[0]]: i[1] }), {});
}
/* eslint-enable max-len, @stylistic/max-len, quote-props, @stylistic/quote-props */

/**
 * ScaleTargetRef defines the /scale-able resource that this PodAutoscaler
 * is responsible for quickly right-sizing.
 *
 * @schema PodAutoscalerSpecScaleTargetRef
 */
export interface PodAutoscalerSpecScaleTargetRef {
  /**
   * API version of the referent.
   *
   * @schema PodAutoscalerSpecScaleTargetRef#apiVersion
   */
  readonly apiVersion?: string;

  /**
   * Kind of the referent.
   * More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
   *
   * @schema PodAutoscalerSpecScaleTargetRef#kind
   */
  readonly kind?: string;

  /**
   * Name of the referent.
   * More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
   *
   * @schema PodAutoscalerSpecScaleTargetRef#name
   */
  readonly name?: string;

}

/**
 * Converts an object of type 'PodAutoscalerSpecScaleTargetRef' to JSON representation.
 */
/* eslint-disable max-len, @stylistic/max-len, quote-props, @stylistic/quote-props */
export function toJson_PodAutoscalerSpecScaleTargetRef(obj: PodAutoscalerSpecScaleTargetRef | undefined): Record<string, any> | undefined {
  if (obj === undefined) { return undefined; }
  const result = {
    'apiVersion': obj.apiVersion,
    'kind': obj.kind,
    'name': obj.name,
  };
  // filter undefined values
  return Object.entries(result).reduce((r, i) => (i[1] === undefined) ? r : ({ ...r, [i[0]]: i[1] }), {});
}
/* eslint-enable max-len, @stylistic/max-len, quote-props, @stylistic/quote-props */

